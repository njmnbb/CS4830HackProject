<!DOCTYPE HTML>
<html>
<head>
	<title>Socket Simon</title>
	<link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
	<img src = "images/logo.png" class = "logo">
	<div class = "header">
		<p class = "header-text">Select your role:</p>
	</div>

	<!-- Game Frame -->
	<div id="game">

		<div class = "player">
			<img src="images/player.jpg">
			<p class = "role-description">I am the player. I play things that are given to me.</p>
			<button id="player" onclick="startGame(this.id)">Start</button>
		</div>
		<div class = "simon">
			<img src="images/simon.jpg">
			<p class = "role-description">I am Simon, hear me roar. I am to be feared and nothing else.</p>
			<button id="simon" onclick="startGame(this.id)">Start</button>
		</div>

	<!-- End Game Frame -->
	</div>

	<!-- Scripts at bottom for faster page loading -->
	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script type="text/javascript">
		var role; 
		var turn;

		// Function for 'start' buttons
	 	function startGame(sentRole) {
	    	//alert('You started the game as a ' + sentRole);
	    	role = sentRole;

	    	switch( role ) {
	    		case simon:
	    		turn = 1
	    		break;
	    		case player:
	    		turn = 0
	    		break;
	    		default:
	    		console.log(role)
	    	}

	    	// console.log('turn == ' + turn + 'role == ' + role);

	    	// populate with gameData
	    	loadGameAs(role, 'player', 'simon', 'header');
	 	}

	 	// Clear a Div
	 	function clearDivByClassName(elementClass) {
	    	document.getElementsByClassName(elementClass)[0].innerHTML = "";
		}

		// Game functions
		function loadGameAs(role, leftDiv, rightDiv, headerDiv) {
			clearDivByClassName(leftDiv);
			clearDivByClassName(rightDiv);
			clearDivByClassName(headerDiv);

			if( role == 'player' ) {
				if( turn == 0 ) {
					editHtml(headerDiv, '<p class = "header-text">Waiting for Simon...</p>');
				}
				else {
					editHtml(headerDiv, '<p class = "header-text">Your turn!</p>');
				}
				editHtml(leftDiv, '<p class = "header-text">You</p>
					<img src="images/simon/green.png" class = "quadrant">
					<img src="images/simon/red.png" class = "quadrant">
					<img src="images/simon/yellow.png" class = "quadrant">
					<img src="images/simon/blue.png" class = "quadrant">');
				editHtml(rightDiv, '<p class = "header-text">Simon</p>
					<img src="images/simon/green.png" class = "quadrant">
					<img src="images/simon/red.png" class = "quadrant">
					<img src="images/simon/yellow.png" class = "quadrant">
					<img src="images/simon/blue.png" class = "quadrant">');
			}
			else if( role == 'simon' ) {
				if( turn == 0 ) {
					editHtml(headerDiv, '<p class = "header-text">Waiting for minion to copy you...</p>');
				else {
					editHtml(headerDiv, '<p class = "header-text">Make a Pattern!');
				}
				editHtml(leftDiv, '<p class = "header-text">You</p>
					<img src="images/simon/green.png" class = "quadrant">
					<img src="images/simon/red.png" class = "quadrant">
					<img src="images/simon/yellow.png" class = "quadrant">
					<img src="images/simon/blue.png" class = "quadrant">');
				editHtml(rightDiv, '<p class = "header-text">Player</p>
					<img src="images/simon/green.png" class = "quadrant">
					<img src="images/simon/red.png" class = "quadrant">
					<img src="images/simon/yellow.png" class = "quadrant">
					<img src="images/simon/blue.png" class = "quadrant">');
			}
			else {
				editHtml(headerDiv, 'Error, No Role Set');
			}
		}

		// Shortcut for editing html 
		// BY CLASS NAME
		function editHtml(className, html) {
			document.getElementsByClassName(className)[0].innerHTML = html;
		}
	</script>
</body>
</html>
